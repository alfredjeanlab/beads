# Quench configuration for kbeads (Go)
# Run `quench config` for reference documentation
version = 1

[git]
baseline = "notes"

[git.commit]
check = "error"

[ratchet]
check = "error"
coverage = true
escapes = true

# --- Checks ---

[check.cloc]
check = "warn"
max_lines = 1000        # http_test.go is 935
max_lines_test = 1000
max_tokens = 8000
exclude = [
  "gen/**",             # protobuf generated code
  "proto/**",           # protobuf definitions
  "docs/**",
]

[check.escapes]
check = "error"

[[check.escapes.patterns]]
name = "panic"
pattern = "\\bpanic\\("
action = "comment"
comment = "// PANIC:"
in_tests = "allow"
advice = "Add a // PANIC: comment explaining why panic is acceptable here."

[check.agents]
check = "warn"
files = ["CLAUDE.md"]
required = ["CLAUDE.md"]
max_lines = false
max_tokens = false
sync = false

[check.docs]
check = "warn"

[check.docs.toc]
check = "warn"
include = ["**/*.md"]
exclude = ["docs/**", "gen/**"]

[check.docs.links]
check = "warn"
include = ["**/*.md"]
exclude = ["docs/**", "gen/**"]

[check.tests]
check = "warn"
auto = true

[check.tests.commit]
check = "warn"
scope = "branch"
exclude = ["**/main.go", "gen/**", "proto/**"]

[[check.tests.suite]]
runner = "go"

[check.tests.time]
check = "warn"

[check.license]
check = "off"

# --- Languages ---

[golang]
source = ["**/*.go"]
tests = ["**/*_test.go"]
ignore = ["vendor/", "gen/"]

[golang.cloc]
check = "warn"

[golang.suppress]
check = "comment"

[golang.suppress.test]
check = "allow"

[shell]
cloc.check = "warn"
